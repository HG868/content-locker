<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI工具资源库 - 解锁获取</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <style>
        /* 弹窗动画 */
        @keyframes modal-in {
            from { opacity: 0; transform: scale(0.95) translateY(-10px); }
            to { opacity: 1; transform: scale(1) translateY(0); }
        }
        .modal-animate { animation: modal-in 0.3s ease-out; }
        
        /* 玻璃拟态效果 */
        .glass-modal {
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.5);
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.3);
        }
        
        /* 卡片悬停效果 */
        .tool-card {
            transition: all 0.3s ease;
        }
        .tool-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px -10px rgba(59, 130, 246, 0.2);
        }
        
        /* 按钮渐变 */
        .btn-gradient {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            transition: all 0.3s ease;
        }
        .btn-gradient:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px -5px rgba(102, 126, 234, 0.4);
        }
        
        .btn-green {
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
        }
        .btn-green:hover {
            box-shadow: 0 10px 20px -5px rgba(17, 153, 142, 0.4);
        }
        
        /* 进度条 */
        .progress-bar {
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            background-size: 200% 100%;
            animation: progress-move 2s linear infinite;
        }
        @keyframes progress-move {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }
        
        /* 社群二维码样式 */
        .qr-box {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            padding: 3px;
            border-radius: 12px;
        }
        .qr-inner {
            background: white;
            border-radius: 10px;
            padding: 15px;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-gray-50 to-blue-50 min-h-screen">
    <!-- 页面头部 -->
    <header class="bg-white shadow-sm sticky top-0 z-40">
        <div class="container mx-auto px-4 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center">
                    <i class="fa fa-cube text-3xl text-blue-600 mr-3"></i>
                    <div>
                        <h1 class="text-xl font-bold text-gray-800">AI工具资源库</h1>
                        <p class="text-xs text-gray-500">精选优质AI工具，助力高效创作</p>
                    </div>
                </div>
                <div class="flex items-center space-x-4">
                    <span class="text-sm text-gray-600">
                        <i class="fa fa-users mr-1"></i>
                        <span id="user-count">12,580</span> 人已加入
                    </span>
                </div>
            </div>
        </div>
    </header>

    <!-- 主内容区域 - 完全可见 -->
    <main class="container mx-auto px-4 py-8">
        <!-- 介绍横幅 -->
        <div class="bg-gradient-to-r from-blue-600 to-purple-600 rounded-2xl p-8 mb-8 text-white">
            <div class="max-w-3xl">
                <h2 class="text-3xl font-bold mb-4">解锁全部AI工具资源</h2>
                <p class="text-lg opacity-90 mb-6">
                    我们是一个专注于AI工具分享和学习的社群，汇集了大量优质的AI绘画、聊天助手、代码生成等工具资源。
                    加入社群或支付解锁，即可获取全部工具下载链接和详细使用教程。
                </p>
                <div class="flex flex-wrap gap-4">
                    <div class="flex items-center bg-white/20 rounded-lg px-4 py-2">
                        <i class="fa fa-check-circle mr-2"></i>
                        <span>50+ 精选AI工具</span>
                    </div>
                    <div class="flex items-center bg-white/20 rounded-lg px-4 py-2">
                        <i class="fa fa-check-circle mr-2"></i>
                        <span>详细使用教程</span>
                    </div>
                    <div class="flex items-center bg-white/20 rounded-lg px-4 py-2">
                        <i class="fa fa-check-circle mr-2"></i>
                        <span>持续更新维护</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- 工具展示网格 -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
            <!-- 工具卡片 1 -->
            <div class="tool-card bg-white rounded-2xl p-6 shadow-lg border border-gray-100">
                <div class="flex items-start justify-between mb-4">
                    <div class="w-14 h-14 bg-blue-100 rounded-xl flex items-center justify-center">
                        <i class="fa fa-robot text-2xl text-blue-600"></i>
                    </div>
                    <span class="bg-blue-100 text-blue-700 text-xs font-semibold px-3 py-1 rounded-full">热门</span>
                </div>
                <h3 class="text-lg font-bold text-gray-800 mb-2">AI绘画大师 Pro</h3>
                <p class="text-gray-600 text-sm mb-4">专业级AI绘画工具，支持4K分辨率输出，多种艺术风格一键生成</p>
                <div class="flex items-center justify-between">
                    <div class="flex items-center text-sm text-gray-500">
                        <i class="fa fa-download mr-1"></i>
                        <span>8.2k 下载</span>
                    </div>
                    <button onclick="showUnlockModal()" class="bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-lg text-sm font-medium transition-colors">
                        <i class="fa fa-lock mr-1"></i>解锁下载
                    </button>
                </div>
            </div>

            <!-- 工具卡片 2 -->
            <div class="tool-card bg-white rounded-2xl p-6 shadow-lg border border-gray-100">
                <div class="flex items-start justify-between mb-4">
                    <div class="w-14 h-14 bg-green-100 rounded-xl flex items-center justify-center">
                        <i class="fa fa-comments text-2xl text-green-600"></i>
                    </div>
                    <span class="bg-green-100 text-green-700 text-xs font-semibold px-3 py-1 rounded-full">推荐</span>
                </div>
                <h3 class="text-lg font-bold text-gray-800 mb-2">智能聊天助手</h3>
                <p class="text-gray-600 text-sm mb-4">多轮对话AI，支持上下文理解和内容生成，办公学习好帮手</p>
                <div class="flex items-center justify-between">
                    <div class="flex items-center text-sm text-gray-500">
                        <i class="fa fa-download mr-1"></i>
                        <span>6.5k 下载</span>
                    </div>
                    <button onclick="showUnlockModal()" class="bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-lg text-sm font-medium transition-colors">
                        <i class="fa fa-lock mr-1"></i>解锁下载
                    </button>
                </div>
            </div>

            <!-- 工具卡片 3 -->
            <div class="tool-card bg-white rounded-2xl p-6 shadow-lg border border-gray-100">
                <div class="flex items-start justify-between mb-4">
                    <div class="w-14 h-14 bg-purple-100 rounded-xl flex items-center justify-center">
                        <i class="fa fa-code text-2xl text-purple-600"></i>
                    </div>
                    <span class="bg-purple-100 text-purple-700 text-xs font-semibold px-3 py-1 rounded-full">新品</span>
                </div>
                <h3 class="text-lg font-bold text-gray-800 mb-2">代码生成器</h3>
                <p class="text-gray-600 text-sm mb-4">AI代码助手，支持20+编程语言，自动生成高质量代码</p>
                <div class="flex items-center justify-between">
                    <div class="flex items-center text-sm text-gray-500">
                        <i class="fa fa-download mr-1"></i>
                        <span>4.8k 下载</span>
                    </div>
                    <button onclick="showUnlockModal()" class="bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-lg text-sm font-medium transition-colors">
                        <i class="fa fa-lock mr-1"></i>解锁下载
                    </button>
                </div>
            </div>

            <!-- 工具卡片 4 -->
            <div class="tool-card bg-white rounded-2xl p-6 shadow-lg border border-gray-100">
                <div class="flex items-start justify-between mb-4">
                    <div class="w-14 h-14 bg-orange-100 rounded-xl flex items-center justify-center">
                        <i class="fa fa-video-camera text-2xl text-orange-600"></i>
                    </div>
                    <span class="bg-orange-100 text-orange-700 text-xs font-semibold px-3 py-1 rounded-full">视频</span>
                </div>
                <h3 class="text-lg font-bold text-gray-800 mb-2">AI视频编辑器</h3>
                <p class="text-gray-600 text-sm mb-4">智能视频剪辑工具，自动添加字幕、转场和特效</p>
                <div class="flex items-center justify-between">
                    <div class="flex items-center text-sm text-gray-500">
                        <i class="fa fa-download mr-1"></i>
                        <span>3.2k 下载</span>
                    </div>
                    <button onclick="showUnlockModal()" class="bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-lg text-sm font-medium transition-colors">
                        <i class="fa fa-lock mr-1"></i>解锁下载
                    </button>
                </div>
            </div>

            <!-- 工具卡片 5 -->
            <div class="tool-card bg-white rounded-2xl p-6 shadow-lg border border-gray-100">
                <div class="flex items-start justify-between mb-4">
                    <div class="w-14 h-14 bg-pink-100 rounded-xl flex items-center justify-center">
                        <i class="fa fa-music text-2xl text-pink-600"></i>
                    </div>
                    <span class="bg-pink-100 text-pink-700 text-xs font-semibold px-3 py-1 rounded-full">音频</span>
                </div>
                <h3 class="text-lg font-bold text-gray-800 mb-2">AI音乐创作</h3>
                <p class="text-gray-600 text-sm mb-4">AI音乐生成工具，支持多种风格和乐器，创作专属音乐</p>
                <div class="flex items-center justify-between">
                    <div class="flex items-center text-sm text-gray-500">
                        <i class="fa fa-download mr-1"></i>
                        <span>2.9k 下载</span>
                    </div>
                    <button onclick="showUnlockModal()" class="bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-lg text-sm font-medium transition-colors">
                        <i class="fa fa-lock mr-1"></i>解锁下载
                    </button>
                </div>
            </div>

            <!-- 工具卡片 6 -->
            <div class="tool-card bg-white rounded-2xl p-6 shadow-lg border border-gray-100">
                <div class="flex items-start justify-between mb-4">
                    <div class="w-14 h-14 bg-indigo-100 rounded-xl flex items-center justify-center">
                        <i class="fa fa-file-text text-2xl text-indigo-600"></i>
                    </div>
                    <span class="bg-indigo-100 text-indigo-700 text-xs font-semibold px-3 py-1 rounded-full">文档</span>
                </div>
                <h3 class="text-lg font-bold text-gray-800 mb-2">智能文档助手</h3>
                <p class="text-gray-600 text-sm mb-4">AI文档处理工具，支持总结、翻译、格式转换等功能</p>
                <div class="flex items-center justify-between">
                    <div class="flex items-center text-sm text-gray-500">
                        <i class="fa fa-download mr-1"></i>
                        <span>5.1k 下载</span>
                    </div>
                    <button onclick="showUnlockModal()" class="bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-lg text-sm font-medium transition-colors">
                        <i class="fa fa-lock mr-1"></i>解锁下载
                    </button>
                </div>
            </div>
        </div>

        <!-- 底部CTA -->
        <div class="text-center">
            <button onclick="showUnlockModal()" class="btn-gradient text-white font-bold text-lg px-10 py-4 rounded-2xl shadow-lg">
                <i class="fa fa-unlock-alt mr-2"></i>
                立即解锁全部资源
            </button>
            <p class="text-gray-500 mt-4 text-sm">
                <i class="fa fa-shield mr-1"></i>
                安全支付 · 即时解锁 · 永久访问
            </p>
        </div>
    </main>

    <!-- 解锁弹窗 -->
    <div id="unlock-modal" class="fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 hidden">
        <div class="glass-modal rounded-2xl p-8 max-w-lg w-full mx-4 modal-animate">
            <!-- 头部介绍 -->
            <div class="text-center mb-6">
                <div class="w-20 h-20 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg">
                    <i class="fa fa-gift text-white text-3xl"></i>
                </div>
                <h2 class="text-2xl font-bold text-gray-800 mb-2">加入我们，解锁全部资源</h2>
                <p class="text-gray-600">
                    AI工具资源库是一个专注于AI工具分享和学习的社群<br>
                    选择以下任一方式即可解锁全部资源
                </p>
            </div>

            <!-- 解锁选项 -->
            <div class="space-y-4 mb-6">
                <!-- 选项1：入社群 -->
                <div class="bg-gradient-to-r from-pink-50 to-rose-50 border-2 border-pink-200 rounded-xl p-5">
                    <div class="flex items-start">
                        <div class="w-12 h-12 bg-gradient-to-br from-pink-500 to-rose-500 rounded-xl flex items-center justify-center mr-4 flex-shrink-0">
                            <i class="fa fa-wechat text-white text-xl"></i>
                        </div>
                        <div class="flex-1">
                            <h3 class="font-bold text-gray-800 mb-1">方式一：加入微信社群</h3>
                            <p class="text-sm text-gray-600 mb-3">扫码加入社群，与志同道合的朋友一起交流学习</p>
                            <div class="qr-box inline-block">
                                <div class="qr-inner">
                                    <!-- 静态进群码图片 - 已替换为 qun.png -->
                                    <img src="./image/qun.png" alt="微信社群二维码" class="w-32 h-32 object-contain rounded-lg">
                                </div>
                            </div>
                            <p class="text-xs text-gray-500 mt-2">扫码添加微信，回复"解锁"获取资源</p>
                        </div>
                    </div>
                </div>

                <!-- 选项2：直接支付 -->
                <div class="bg-gradient-to-r from-blue-50 to-indigo-50 border-2 border-blue-200 rounded-xl p-5">
                    <div class="flex items-start">
                        <div class="w-12 h-12 bg-gradient-to-br from-blue-500 to-indigo-500 rounded-xl flex items-center justify-center mr-4 flex-shrink-0">
                            <i class="fa fa-bolt text-white text-xl"></i>
                        </div>
                        <div class="flex-1">
                            <h3 class="font-bold text-gray-800 mb-1">方式二：直接支付解锁</h3>
                            <p class="text-sm text-gray-600 mb-3">支付 ¥2.00 立即解锁全部资源，无需等待</p>
                            
                            <!-- 支付方式选择 -->
                            <div class="flex gap-3 mb-4">
                                <button onclick="selectPayMethod('wechat')" id="pay-wechat" class="flex-1 bg-white border-2 border-green-500 text-green-600 py-2 rounded-lg font-medium text-sm hover:bg-green-50 transition-colors">
                                    <i class="fa fa-wechat mr-1"></i>微信支付
                                </button>
                                <button onclick="selectPayMethod('alipay')" id="pay-alipay" class="flex-1 bg-white border-2 border-gray-200 text-gray-600 py-2 rounded-lg font-medium text-sm hover:bg-blue-50 transition-colors">
                                    <i class="fa fa-alipay mr-1"></i>支付宝
                                </button>
                            </div>

                            <!-- 支付按钮 -->
                            <button onclick="processPayment()" id="pay-btn" class="w-full btn-gradient text-white font-bold py-3 rounded-xl shadow-md">
                                <i class="fa fa-credit-card mr-2"></i>
                                立即支付 ¥2.00 解锁
                            </button>

                            <!-- 支付进度 -->
                            <div id="pay-progress" class="hidden mt-4">
                                <div class="flex justify-between text-sm text-gray-600 mb-2">
                                    <span>正在处理支付...</span>
                                    <span id="progress-percent">0%</span>
                                </div>
                                <div class="w-full bg-gray-200 rounded-full h-2">
                                    <div id="progress-bar" class="progress-bar h-2 rounded-full" style="width: 0%"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 底部信息 -->
            <div class="border-t border-gray-200 pt-4">
                <div class="flex items-center justify-center text-sm text-gray-500 mb-4">
                    <i class="fa fa-shield text-green-500 mr-2"></i>
                    <span>安全支付保障 · 7天无理由退款</span>
                </div>
                <button onclick="closeModal()" class="w-full border border-gray-300 text-gray-600 py-2 rounded-lg hover:bg-gray-50 transition-colors">
                    稍后再说
                </button>
            </div>
        </div>
    </div>

    <!-- 支付成功弹窗 -->
    <div id="success-modal" class="fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 hidden">
        <div class="glass-modal rounded-2xl p-8 max-w-sm w-full mx-4 text-center modal-animate">
            <div class="w-20 h-20 bg-gradient-to-br from-green-400 to-green-600 rounded-full flex items-center justify-center mx-auto mb-4">
                <i class="fa fa-check text-white text-3xl"></i>
            </div>
            <h2 class="text-2xl font-bold text-gray-800 mb-2">支付成功！</h2>
            <p class="text-gray-600 mb-6">资源已解锁，正在为您准备下载...</p>
            <div class="w-full bg-gray-200 rounded-full h-2 mb-4">
                <div class="bg-green-500 h-2 rounded-full animate-pulse" style="width: 100%"></div>
            </div>
        </div>
    </div>

    <!-- 解锁后内容展示 -->
    <div id="unlocked-section" class="hidden container mx-auto px-4 py-8">
        <div class="bg-green-50 border border-green-200 rounded-xl p-6 mb-6">
            <div class="flex items-center text-green-700">
                <i class="fa fa-check-circle text-3xl mr-4"></i>
                <div>
                    <h3 class="font-bold text-lg">恭喜！资源已解锁</h3>
                    <p class="text-sm">您现在可以下载所有AI工具资源</p>
                </div>
            </div>
        </div>
        
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="download-list">
            <!-- 动态生成下载链接 -->
        </div>
    </div>

    <!-- 支付二维码展示区域 -->
    <div id="payment-qr-modal" class="fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 hidden">
        <div class="glass-modal rounded-2xl p-8 max-w-md w-full mx-4 modal-animate">
            <div class="text-center mb-6">
                <h3 class="text-xl font-bold text-gray-800 mb-2">请扫码支付</h3>
                <p class="text-gray-600">使用<span id="qr-pay-method">支付宝</span>扫描下方二维码完成支付</p>
            </div>
            
            <div class="bg-white rounded-xl p-6 mb-6 text-center">
                <div class="text-3xl font-bold text-blue-600 mb-2">¥<span id="qr-amount">2.00</span></div>
                <p class="text-sm text-gray-500 mb-4">订单号：<span id="qr-order-id">-</span></p>
                <div class="w-64 h-64 bg-gray-100 rounded-lg mx-auto flex items-center justify-center border-2 border-dashed border-gray-300">
                    <!-- 静态付款码图片 - 已替换为指定路径 -->
                    <img id="payment-qr-image" src="./image/11202.png" alt="支付二维码" class="w-60 h-60 object-contain">
                </div>
                <p class="text-xs text-gray-400 mt-2">截图保存，使用支付宝/微信扫码支付</p>
            </div>
            
            <div class="space-y-3">
                <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-3 mb-4">
                    <p class="text-sm text-yellow-800">
                        <i class="fa fa-lightbulb-o mr-1"></i>
                        支付完成后，点击下方按钮并输入支付订单号后4位验证
                    </p>
                </div>
                <div id="verify-section" class="hidden">
                    <input type="text" id="verify-code" placeholder="请输入支付订单号后4位" maxlength="4" class="w-full border border-gray-300 rounded-lg px-4 py-3 text-center text-lg tracking-widest mb-3">
                    <button onclick="verifyPayment()" class="w-full bg-green-600 text-white py-3 rounded-xl font-semibold hover:bg-green-700 transition-colors">
                        <i class="fa fa-check mr-2"></i>验证并解锁
                    </button>
                </div>
                <button id="show-verify-btn" onclick="showVerifySection()" class="w-full bg-blue-600 text-white py-3 rounded-xl font-semibold hover:bg-blue-700 transition-colors">
                    <i class="fa fa-check-circle mr-2"></i>我已完成支付
                </button>
                <button onclick="closeQrModal()" class="w-full border border-gray-300 text-gray-600 py-2 rounded-xl hover:bg-gray-50 transition-colors">
                    取消支付
                </button>
            </div>
        </div>
    </div>

    <script>
        // ==================== 配置区域 ====================
        const CONFIG = {
            // 支付金额
            PAYMENT_AMOUNT: 2.00,
            // 本地存储键名
            STORAGE_KEY: 'ai_tools_unlocked',
            // 验证密钥（简单的防篡改，实际应该由后端验证）
            VERIFY_KEY: 'your-secret-key-2024',
            // 图片路径配置 - 已更新群图片
            IMAGES: {
                // 付款码图片路径
                paymentQR: './image/11202.png',
                // 进群码图片路径 - 已替换为 qun.png
                groupQR: './image/qun.png'
            }
        };

        // 工具数据
        const tools = [
            { id: 1, name: 'AI绘画大师 Pro', icon: 'fa-robot', color: 'blue', size: '256MB', url: '#' },
            { id: 2, name: '智能聊天助手', icon: 'fa-comments', color: 'green', size: '128MB', url: '#' },
            { id: 3, name: '代码生成器', icon: 'fa-code', color: 'purple', size: '64MB', url: '#' },
            { id: 4, name: 'AI视频编辑器', icon: 'fa-video-camera', color: 'orange', size: '512MB', url: '#' },
            { id: 5, name: 'AI音乐创作', icon: 'fa-music', color: 'pink', size: '192MB', url: '#' },
            { id: 6, name: '智能文档助手', icon: 'fa-file-text', color: 'indigo', size: '86MB', url: '#' }
        ];

        // 状态管理
        let state = {
            selectedMethod: 'wechat',
            isUnlocked: localStorage.getItem(CONFIG.STORAGE_KEY) === 'true',
            currentOrderId: null,
            isProcessing: false
        };

        // 页面加载时检查解锁状态
        window.onload = function() {
            if (state.isUnlocked) {
                showUnlockedContent();
            }
            // 模拟用户数量增长
            setInterval(() => {
                const countEl = document.getElementById('user-count');
                let count = parseInt(countEl.textContent.replace(',', ''));
                count += Math.floor(Math.random() * 3);
                countEl.textContent = count.toLocaleString();
            }, 5000);
        };

        // 显示解锁弹窗
        function showUnlockModal() {
            if (state.isUnlocked) {
                showUnlockedContent();
                return;
            }
            document.getElementById('unlock-modal').classList.remove('hidden');
            document.body.style.overflow = 'hidden';
        }

        // 关闭弹窗
        function closeModal() {
            document.getElementById('unlock-modal').classList.add('hidden');
            document.body.style.overflow = '';
        }

        // 关闭二维码弹窗
        function closeQrModal() {
            document.getElementById('payment-qr-modal').classList.add('hidden');
            stopPaymentCheck();
        }

        // 选择支付方式
        function selectPayMethod(method) {
            state.selectedMethod = method;
            const wechatBtn = document.getElementById('pay-wechat');
            const alipayBtn = document.getElementById('pay-alipay');
            
            if (method === 'wechat') {
                wechatBtn.classList.add('border-green-500', 'text-green-600');
                wechatBtn.classList.remove('border-gray-200', 'text-gray-600');
                alipayBtn.classList.remove('border-blue-500', 'text-blue-600');
                alipayBtn.classList.add('border-gray-200', 'text-gray-600');
            } else {
                alipayBtn.classList.add('border-blue-500', 'text-blue-600');
                alipayBtn.classList.remove('border-gray-200', 'text-gray-600');
                wechatBtn.classList.remove('border-green-500', 'text-green-600');
                wechatBtn.classList.add('border-gray-200', 'text-gray-600');
            }
        }

        // ==================== 支付核心功能（静态付款码版本）====================

        /**
         * 处理支付流程 - 静态付款码版本
         * 1. 生成唯一订单号（用于用户支付时备注）
         * 2. 展示静态付款码
         * 3. 用户扫码支付并在备注中填写订单号后4位
         * 4. 用户输入后4位进行验证
         */
        function processPayment() {
            if (state.isProcessing) return;
            state.isProcessing = true;

            try {
                // 1. 生成订单号
                const orderId = generateOrderId();
                state.currentOrderId = orderId;

                // 2. 保存订单信息
                localStorage.setItem('current_order_id', orderId);
                localStorage.setItem(`${orderId}_data`, JSON.stringify({
                    amount: CONFIG.PAYMENT_AMOUNT,
                    method: state.selectedMethod,
                    timestamp: Date.now(),
                    // 生成验证令牌（用于后续验证）
                    verifyToken: generateVerifyToken(orderId)
                }));

                // 3. 展示付款码弹窗
                showPaymentQR(orderId);

            } catch (error) {
                console.error('支付处理错误:', error);
                showPaymentError('支付初始化失败，请重试');
            } finally {
                state.isProcessing = false;
            }
        }

        /**
         * 生成唯一订单号
         * 格式：年月日 + 4位随机数（便于用户输入）
         */
        function generateOrderId() {
            const now = new Date();
            const dateStr = now.getFullYear().toString().slice(-2) +
                String(now.getMonth() + 1).padStart(2, '0') +
                String(now.getDate()).padStart(2, '0');
            const randomStr = Math.floor(Math.random() * 10000).toString().padStart(4, '0');
            return `${dateStr}${randomStr}`;
        }

        /**
         * 生成验证令牌
         * 用于验证用户输入的后4位是否正确
         */
        function generateVerifyToken(orderId) {
            // 简单的哈希算法，实际应该使用更安全的算法
            let hash = 0;
            const str = orderId + CONFIG.VERIFY_KEY;
            for (let i = 0; i < str.length; i++) {
                const char = str.charCodeAt(i);
                hash = ((hash << 5) - hash) + char;
                hash = hash & hash;
            }
            return Math.abs(hash).toString(16).slice(-4).toUpperCase();
        }

        /**
         * 展示支付二维码 - 静态付款码版本
         */
        function showPaymentQR(orderId) {
            // 关闭解锁弹窗
            document.getElementById('unlock-modal').classList.add('hidden');

            // 显示二维码弹窗
            const qrModal = document.getElementById('payment-qr-modal');
            qrModal.classList.remove('hidden');

            // 更新支付信息
            document.getElementById('qr-pay-method').textContent = 
                state.selectedMethod === 'alipay' ? '支付宝' : '微信';
            document.getElementById('qr-amount').textContent = CONFIG.PAYMENT_AMOUNT.toFixed(2);
            document.getElementById('qr-order-id').textContent = orderId;

            // 重置验证区域
            document.getElementById('verify-section').classList.add('hidden');
            document.getElementById('show-verify-btn').classList.remove('hidden');
            document.getElementById('verify-code').value = '';

            // 显示付款码图片（使用配置的静态图片）
            const qrImage = document.getElementById('payment-qr-image');
            qrImage.src = CONFIG.IMAGES.paymentQR;

            // 显示提示信息
            showPaymentNotice(orderId);
        }

        /**
         * 显示支付提示
         */
        function showPaymentNotice(orderId) {
            const notice = document.createElement('div');
            notice.id = 'payment-notice';
            notice.className = 'fixed top-4 left-1/2 transform -translate-x-1/2 bg-blue-600 text-white px-6 py-3 rounded-lg shadow-lg z-50 text-sm';
            notice.innerHTML = `
                <i class="fa fa-info-circle mr-2"></i>
                请扫码支付 <strong>¥${CONFIG.PAYMENT_AMOUNT}</strong>，并在备注中填写：<strong>${orderId}</strong>
                <button onclick="this.parentElement.remove()" class="ml-4 text-blue-200 hover:text-white">
                    <i class="fa fa-times"></i>
                </button>
            `;
            document.body.appendChild(notice);

            // 5秒后自动隐藏
            setTimeout(() => {
                if (notice.parentElement) {
                    notice.remove();
                }
            }, 10000);
        }

        /**
         * 显示验证输入区域
         */
        function showVerifySection() {
            document.getElementById('show-verify-btn').classList.add('hidden');
            document.getElementById('verify-section').classList.remove('hidden');
            document.getElementById('verify-code').focus();
        }

        /**
         * 验证支付
         * 用户输入订单号后4位进行验证
         */
        function verifyPayment() {
            const inputCode = document.getElementById('verify-code').value.trim().toUpperCase();
            const orderId = state.currentOrderId;

            if (!inputCode || inputCode.length !== 4) {
                showPaymentError('请输入4位验证码');
                return;
            }

            if (!orderId) {
                showPaymentError('订单信息丢失，请重新发起支付');
                return;
            }

            // 验证输入的后4位是否匹配订单号后4位
            const orderLast4 = orderId.slice(-4).toUpperCase();
            
            if (inputCode === orderLast4) {
                // 验证通过，完成支付
                completePayment({
                    orderId: orderId,
                    amount: CONFIG.PAYMENT_AMOUNT,
                    payTime: Date.now(),
                    verifyCode: inputCode
                });
            } else {
                showPaymentError('验证码错误，请检查支付备注中的订单号');
            }
        }

        /**
         * 完成支付 - 静态付款码版本
         * @param {Object} paymentResult - 支付结果数据
         */
        function completePayment(paymentResult) {
            // 1. 验证支付结果
            if (!paymentResult || !paymentResult.orderId) {
                showPaymentError('支付验证失败，请联系客服');
                return;
            }

            // 2. 保存解锁状态
            state.isUnlocked = true;
            localStorage.setItem(CONFIG.STORAGE_KEY, 'true');
            localStorage.setItem(`${CONFIG.STORAGE_KEY}_time`, Date.now().toString());
            localStorage.setItem(`${CONFIG.STORAGE_KEY}_order`, paymentResult.orderId);
            localStorage.setItem(`${CONFIG.STORAGE_KEY}_verify`, paymentResult.verifyCode);

            // 3. 清除当前订单
            localStorage.removeItem('current_order_id');
            localStorage.removeItem(`${paymentResult.orderId}_data`);

            // 4. 关闭二维码弹窗和提示
            document.getElementById('payment-qr-modal').classList.add('hidden');
            const notice = document.getElementById('payment-notice');
            if (notice) notice.remove();

            // 5. 显示支付成功弹窗
            document.getElementById('success-modal').classList.remove('hidden');

            // 6. 2秒后显示解锁内容
            setTimeout(() => {
                document.getElementById('success-modal').classList.add('hidden');
                document.body.style.overflow = '';
                showUnlockedContent();
            }, 2000);
        }

        /**
         * 显示支付错误信息
         */
        function showPaymentError(message) {
            // 使用更友好的错误提示
            const errorDiv = document.createElement('div');
            errorDiv.className = 'fixed top-4 left-1/2 transform -translate-x-1/2 bg-red-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 text-sm';
            errorDiv.innerHTML = `
                <i class="fa fa-exclamation-circle mr-2"></i>
                ${message}
                <button onclick="this.parentElement.remove()" class="ml-4 text-red-200 hover:text-white">
                    <i class="fa fa-times"></i>
                </button>
            `;
            document.body.appendChild(errorDiv);
            
            // 3秒后自动隐藏
            setTimeout(() => {
                if (errorDiv.parentElement) {
                    errorDiv.remove();
                }
            }, 3000);
        }

        // 显示解锁后的内容
        function showUnlockedContent() {
            document.getElementById('unlocked-section').classList.remove('hidden');
            document.querySelector('main').classList.add('hidden');
            
            const downloadList = document.getElementById('download-list');
            downloadList.innerHTML = tools.map(tool => `
                <div class="bg-white rounded-xl p-6 shadow-lg border border-gray-100">
                    <div class="flex items-center mb-4">
                        <div class="w-12 h-12 bg-${tool.color}-100 rounded-xl flex items-center justify-center mr-4">
                            <i class="fa ${tool.icon} text-xl text-${tool.color}-600"></i>
                        </div>
                        <div>
                            <h3 class="font-bold text-gray-800">${tool.name}</h3>
                            <p class="text-sm text-gray-500">${tool.size}</p>
                        </div>
                    </div>
                    <a href="${tool.url}" class="block w-full btn-green text-white text-center py-3 rounded-xl font-semibold">
                        <i class="fa fa-download mr-2"></i>立即下载
                    </a>
                </div>
            `).join('');
            
            window.scrollTo(0, 0);
        }

        // 点击遮罩关闭弹窗
        document.getElementById('unlock-modal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeModal();
            }
        });

        // ESC键关闭弹窗
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeModal();
            }
        });
    </script>
</body>
</html>